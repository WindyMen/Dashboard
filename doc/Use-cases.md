# 青年短租用例文档

## brief

**发布房源：** 房东选择出租房源地址，确认出租时间段，填写有关房屋的信息。房东确认并提交列表。系统对房源列表进行检查和记录。系统更新房源信息，登记房源信息到房东账户，并显示该房源信息到搜索列表。

**搜索房源：** 旅客确认目的地，确定入住时间以及退房时间，确认搜索。系统搜索符合条件的房源信息，显示所有房源信息到搜索列表。

**预订房源：** 旅客搜索房源后，选择一个房源。系统显示选中房源的详细信息。旅客查看该房源信息，并再次确认入住时间以及退房时间。系统检查并显示订单信息。旅客确认订单信息并提交订单。系统检查并显示支付信息，旅客进行支付。系统确认支付信息并记录，更新订单信息，登记订单到旅客账户以及房源房东账户。旅客完成预订。

**取消订单：** 旅客查看账户订单信息，选择一个订单，确定取消该订单。系统更新该订单状态，进行退款，并从旅客账户以及房东账户删除该订单。

**修改房源信息：** 房东查看账户房源信息，选择一个房源。系统显示该房源详细信息。房东修改房源信息，并确定修改。系统确认并记录房源信息列表，更新房源信息。

**删除房源：** 房东查看账户房源信息，选择一个房源。系统显示该房源详细信息。房东确认删除房源。系统确认并删除房源信息。

## casual

### 发布房源

**主成功场景：** 房东选择出租房源地址，确认出租时间段，填写有关房屋的信息。房东确认并提交列表。系统对房源列表进行检查和记录。系统更新房源信息，登记房源信息到房东账户，并显示该房源信息到搜索列表。

**交替场景：**

如果房东未填写完整的房屋信息就确认提交列表，系统会检查列表并拒绝提交。

### 搜索房源

**主成功场景：** 旅客确认目的地，确定入住时间以及退房时间，确认搜索。系统搜索符合条件的房源信息，显示所有房源信息到搜索列表。

**交替场景：**

如果旅客未确认目的地就开始搜索，系统将会显示城市列表，旅客选择目的城市并确认后，系统才开始搜索。

如果旅客未确定入住时间以及退房时间就开始搜索，系统将会显示日历信息，旅客选择并确认入住时间以及退房时间后，系统才开始搜索。

如果系统无法找到符合条件的房源信息，系统将会显示一个空列表。

### 预订房源

**主成功场景：** 旅客搜索房源后，选择一个房源。系统显示选中房源的详细信息。旅客查看该房源信息，并再次确认入住时间以及退房时间。系统检查并显示订单信息。旅客确认订单信息并提交订单。系统检查并显示支付信息，旅客进行支付。系统确认支付信息并记录，更新订单信息，登记订单到旅客账户以及房源房东账户。旅客完成预订。

**交替场景：**

如果系统无法找到符合旅客搜索条件的房源信息，系统将会显示一个空列表，并提示旅客没有符合房源。

如果旅客查看房源信息，并确认入住时间以及退房时间后，系统检查订单发现房源出租时间不符合旅客的居住时间条件，系统将会提示旅客调整时间信息。

如果旅客提交订单，但房源房东在预订期间已删除房源，系统检查没有存在对应房源，并提示旅客房源不存在。

如果旅客提交订单，系统检查订单后无法调用支付系统，系统将会提示旅客无法进行支付，并取消订单。

如果系统显示支付信息，但旅客长时间未进行支付，系统确认支付状态后会取消订单。

### 取消订单

**主成功场景：** 旅客查看账户订单信息，选择一个订单，确定取消该订单。系统更新该订单状态，进行退款，从旅客账户以及房东账户删除该订单。

**交替场景：**

如果旅客取消订单，系统更新订单状态后，进行退款过程失败，系统将提示退款出错，并取消删除订单。

### 修改房源信息

**主成功场景：** 房东查看账户房源信息，选择一个房源。系统显示该房源详细信息。房东修改房源信息，并确定修改。系统确认并记录房源信息列表，更新房源信息。

**交替场景：**

如果房东确定修改房源信息，系统检查确认房源信息列表未填写完成，将提示房东并取消更新房源信息。

### 删除房源

**主成功场景：** 房东查看账户房源信息，选择一个房源。系统显示该房源详细信息。房东确认删除房源。系统确认并删除房源信息。

**交替场景：**

如果房东确认删除房源，系统检查发现房源存在订单，将拒绝删除房源并提示房东房源存在订单。

## full

### 预订房源

**范围：** 青年短租微信小程序

**级别：** 用户目标

**主要参与者：** 旅客

**涉众及其关注点：**

- 旅客：希望能够准确清晰地搜索出目的地可租房源，能够方便快捷且顺利地预订到想要的房屋。
- 房东：希望能够成功准确地收到旅客订单信息。
- 支付授权服务：希望接收到格式和协议正确的数字授权请求。希望准确计算对预订订单的应付款。

**前置条件：** 房源相关信息必须是实际正确且有效的，预订房源的房东身份已被确认和认证。

**成功保证(或后置条件)：** 创建并存储订单信息，确认并记录支付信息，新建订单到旅客账户以及房源房东账户。

**主成功场景(或基本流程)：**

1. 旅客用户登录程序并成功搜索出房源列表。
2. 旅客选择一个房源查看信息。
3. 系统显示选中房源的详细信息。
4. 旅客确认入住时间和退房时间。
5. 系统检查房源出租时间符合旅客居住时间要求，创建并存储订单信息，同时显示订单信息。
6. 旅客确认订单，提交订单。
7. 系统检查房源信息存在，显示支付信息，调用支付系统。
8. 旅客根据支付信息，进行支付。
9. 系统确认订单支付状态，记录支付信息，新建订单到旅客账户以及房源房东账户。

**扩展(或替代流程)：**

*a. 用户使用程序过程中网络连接中断：

 1. 系统记录并保存网络中断前的状态。

 2. 用户重连网络，请求恢复到中断前状态。

 3. 系统恢复中断前状态。

    3a. 用户网络重连时间长于2分钟：

    1. 系统删除保存的状态。
    2. 系统恢复到用户登录后状态。

1a. 用户账号未注册，无法登录：

1. 系统准备进行账号注册。

2. 用户填写账号信息进行注册。

   2a. 用户填写账号信息不完整：

   1. 系统提示账号信息不完整，无法注册。
   2. 用户重新填写注册信息。

3. 系统注册账号，存储并记录账号信息，登录账号。

1b. 系统无法找到符合旅客搜索条件的房源信息：

1. 系统显示空列表，并提示旅客没有符合房源。

5a. 系统检查订单发现房源出租时间不符合旅客居住时间条件：

1. 系统提示旅客调整时间信息。

5-7a. 房源房东删除房源：

1. 系统删除已创建的订单信息。
2. 系统提示旅客房源不存在。

5-7b. 房源已被其他旅客预订：

1. 系统删除已创建的订单信息。
2. 系统提示旅客房源已被预订。

7a. 调用支付系统失败：

1. 系统提示旅客支付系统调用失败。
2. 系统删除已创建的订单信息。

8a. 旅客长时间未进行支付超10分钟：

1. 系统提示旅客支付失败。
2. 系统删除订单。

**特殊需求：**

- 支付系统授权响应时间小于1分钟。
- 我们希望在访问远程服务失败的情况下具有比较强的恢复功能。
- 希望支持文本显示的语言国际化。
- 系统能够进行定位到用户所在城市。

**技术与数据变元表：**

1a. 账号登录可以使用微信号直接登录或使用手机号注册登录。

7a. 支付使用微信支付。

**发生频率：** 可能会不断地发生。

**未决问题：**

- 如何处理多个旅客共同预订同一房源的问题？
- 研究远程服务的恢复问题。

